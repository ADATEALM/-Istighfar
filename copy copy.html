<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>عداد الأذكار</title>
    <meta name="theme-color" content="#007bff">
    <meta name="description" content="عداد الأذكار الإلكتروني لتسجيل استغفارك وتسبيحك وصلاة على النبي">
    <style>
        :root {
            --bg-color: #f3f4f6;
            --text-color: #333;
            --card-bg: #ffffff;
            --button-bg: #007bff;
            --button-hover: #0056b3;
            --button-active: #003f8a;
            --toggle-bg: #333;
            --toggle-text: #fff;
            --link-color: #007bff;
            --link-hover: #0056b3;
            --footer-bg: #f3f4f6;
            --footer-text: #333;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
        }

        [data-theme="dark"] {
            --bg-color: #121212;
            --text-color: #ffffff;
            --card-bg: #1e1e1e;
            --button-bg: #4caf50;
            --button-hover: #388e3c;
            --button-active: #2e7d32;
            --toggle-bg: #f3f4f6;
            --toggle-text: #333;
            --link-color: #4caf50;
            --link-hover: #388e3c;
            --footer-bg: #1e1e1e;
            --footer-text: #fff;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --info-color: #00bcd4;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Arial', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.5s, color 0.5s;
            flex-direction: column;
            position: relative;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
            overscroll-behavior-y: contain;
            -webkit-overflow-scrolling: touch;
        }

        #app {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 420px;
            padding: 25px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin-bottom: 60px;
        }

        h1 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-weight: bold;
            color: var(--button-bg);
            transition: font-size 0.3s;
        }

        .message {
            font-size: 1rem;
            margin-bottom: 20px;
            min-height: 50px;
            font-style: italic;
            transition: font-size 0.3s, opacity 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            border-radius: 10px;
            background-color: rgba(0, 0, 0, 0.05);
        }

        .counter {
            font-size: 3rem;
            margin: 20px 0;
            font-weight: bold;
            transition: font-size 0.3s;
            color: var(--button-bg);
        }

        .stats {
            text-align: center;
            margin: 20px 0;
            font-size: 1rem;
            line-height: 1.8;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .stat-item {
            background: rgba(0, 0, 0, 0.05);
            padding: 10px;
            border-radius: 10px;
            transition: transform 0.3s;
        }

        .stat-item:hover {
            transform: translateY(-3px);
        }

        .button-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }

        .button {
            width: 70px;
            height: 70px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1rem;
            font-weight: bold;
            color: white;
            background-color: var(--button-bg);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .button:hover {
            background-color: var(--button-hover);
            transform: scale(1.1);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        .button:active {
            background-color: var(--button-active);
            transform: scale(0.95);
        }

        .button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%, -50%);
            transform-origin: 50% 50%;
        }

        .button:focus:not(:active)::after {
            animation: ripple 0.6s ease-out;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }

        .button-reset {
            background-color: var(--danger-color);
        }

        .button-reset:hover {
            background-color: #c82333;
        }

        .button-reset:active {
            background-color: #bd2130;
        }

        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .action-button {
            padding: 10px 15px;
            border-radius: 20px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            flex-grow: 1;
        }

        .toggle-theme {
            background-color: var(--toggle-bg);
            color: var(--toggle-text);
        }

        .sound-btn {
            background-color: #6f42c1;
            color: white;
        }

        .vibration-btn {
            background-color: #fd7e14;
            color: white;
        }

        footer {
            font-size: 0.8rem;
            padding: 15px;
            width: 100%;
            text-align: center;
            position: fixed;
            bottom: 0;
            left: 0;
            background-color: var(--footer-bg);
            color: var(--footer-text);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        footer .logo {
            font-weight: bold;
            color: var(--link-color);
            text-decoration: none;
        }

        footer .logo:hover {
            color: var(--link-hover);
            text-decoration: underline;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            transform: translateY(-20px);
            transition: all 0.3s;
            text-align: center;
            -webkit-overflow-scrolling: touch;
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .modal-title {
            font-size: 1.3rem;
            font-weight: bold;
            width: 100%;
            text-align: center;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
            position: absolute;
            left: 15px;
        }

        .modal-body {
            margin: 15px 0;
            line-height: 1.6;
        }

        .modal-verse {
            font-style: italic;
            margin: 15px 0;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 5px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px;
            border-radius: 5px;
            background-color: var(--success-color);
            color: white;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            transform: translateX(150%);
            transition: transform 0.3s;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .vibration {
            animation: vibrate 0.3s linear infinite;
        }

        @keyframes vibrate {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .counter-animate {
            animation: pulse 0.3s ease;
        }

        /* إطار تحديد الجنس */
        .gender-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .gender-content {
            background-color: var(--card-bg);
            padding: 25px;
            border-radius: 15px;
            width: 90%;
            max-width: 350px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .gender-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--button-bg);
        }

        .gender-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .gender-btn {
            padding: 12px 25px;
            border-radius: 25px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            flex-grow: 1;
        }

        .male-btn {
            background-color: #007bff;
            color: white;
        }

        .female-btn {
            background-color: #e83e8c;
            color: white;
        }

        /* إطار الفتوى */
        .fatwa-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .fatwa-content {
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .fatwa-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            padding-bottom: 10px;
        }

        .fatwa-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--button-bg);
        }

        .close-fatwa {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .fatwa-body {
            line-height: 1.8;
            text-align: right;
        }

        .fatwa-body p {
            margin-bottom: 15px;
        }

        .fatwa-link {
            color: var(--link-color);
            text-decoration: none;
        }

        .fatwa-link:hover {
            text-decoration: underline;
        }

        .info-btn {
            background-color: var(--info-color);
            color: white;
        }

        /* تحسينات للشاشات الصغيرة */
        @media (max-width: 480px) {
            #app {
                padding: 20px 15px;
                max-width: 100%;
                border-radius: 0;
            }

            h1 {
                font-size: 1.5rem;
            }

            .counter {
                font-size: 2.5rem;
            }

            .stats {
                font-size: 0.9rem;
                grid-template-columns: 1fr;
            }

            .button {
                width: 60px;
                height: 60px;
                font-size: 0.9rem;
            }

            .action-buttons {
                flex-direction: column;
            }

            .action-button {
                width: 100%;
            }

            .modal-content {
                width: 95%;
                padding: 15px;
            }

            .gender-content {
                padding: 20px 15px;
            }

            .gender-buttons {
                flex-direction: column;
            }

            .gender-btn {
                width: 100%;
            }
        }

        /* تحسينات للشاشات الصغيرة جداً */
        @media (max-width: 360px) {
            h1 {
                font-size: 1.3rem;
            }

            .button {
                width: 55px;
                height: 55px;
            }

            .counter {
                font-size: 2.2rem;
            }
        }

        /* تحسينات للأجهزة اللوحية */
        @media (min-width: 768px) and (max-width: 1024px) {
            #app {
                max-width: 600px;
                padding: 30px;
            }

            h1 {
                font-size: 2rem;
            }

            .counter {
                font-size: 3.5rem;
            }

            .button {
                width: 80px;
                height: 80px;
                font-size: 1.1rem;
            }
        }

        /* تحسينات لأجهزة الكمبيوتر */
        @media (min-width: 1025px) {
            #app {
                max-width: 500px;
            }

            .button:hover {
                transform: scale(1.1);
            }
        }

        /* تحسينات إضافية للشاشات الصغيرة */
        @media (max-width: 320px) {
            #app {
                padding: 15px 10px;
            }
            
            h1 {
                font-size: 1.1rem;
            }
            
            .button {
                width: 50px;
                height: 50px;
                font-size: 0.8rem;
            }
            
            .action-button {
                padding: 8px 10px;
                font-size: 0.8rem;
            }
            
            .message {
                font-size: 0.9rem;
            }
            
            .stats {
                font-size: 0.8rem;
            }
        }

        /* تحسينات للأجهزة ذات الشاشات الطويلة */
        @media (max-height: 600px) {
            #app {
                margin-bottom: 40px;
            }
            
            footer {
                position: relative;
                margin-top: 20px;
            }
        }

        /* منع تكبير النص على أجهزة iOS */
        @media (hover: none) {
            .button:hover {
                transform: none;
            }
        }

        /* تحسينات للوضع الأفقي (Landscape Mode) */
        @media screen and (orientation: landscape) {
            #app {
                max-width: 90%;
                margin: 20px auto;
            }
            
            .button-container {
                flex-direction: row;
                justify-content: center;
            }
            
            .stats {
                grid-template-columns: 1fr 1fr;
            }
            
            /* تحسينات للأجهزة الصغيرة في الوضع الأفقي */
            @media (max-height: 400px) {
                #app {
                    padding: 10px;
                    margin-bottom: 10px;
                }
                
                h1 {
                    font-size: 1.2rem;
                    margin-bottom: 10px;
                }
                
                .counter {
                    font-size: 2rem;
                    margin: 10px 0;
                }
                
                .button {
                    width: 50px;
                    height: 50px;
                    font-size: 0.8rem;
                }
                
                footer {
                    position: relative;
                    margin-top: 10px;
                }
            }
        }

        /* تحسينات إضافية للشاشات الصغيرة جداً */
        @media (max-width: 280px) {
            h1 {
                font-size: 1.1rem;
            }
            
            .button {
                width: 45px;
                height: 45px;
                font-size: 0.7rem;
            }
            
            .action-button {
                padding: 6px 8px;
                font-size: 0.7rem;
            }
            
            .message {
                font-size: 0.8rem;
            }
            
            .stats {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- إطار تحديد الجنس -->
    <div class="gender-modal" id="genderModal">
        <div class="gender-content">
            <h2 class="gender-title">اختر نوعك لتخصيص العداد</h2>
            <p>سيتم استخدام هذا لتخصيص  صيغ الرسائل الموجهة لك (مسلم/مسلمة) 
                اعلم ان هاذا الاجراء لن يتغير ف
                
             <span style="color: red;">اختر الإجابة الصحيحة</span>
            </p>
            <div class="gender-buttons">
                <button class="gender-btn male-btn" id="maleBtn">رجل</button>
                <button class="gender-btn female-btn" id="femaleBtn">امرأة</button>
            </div>
        </div>
    </div>






















































































































































    













<!-- نافذة عرض الفتوى -->
<div class="fatwa-modal" id="fatwaModal" style="display: none;">
  <div class="fatwa-content">
    <div class="fatwa-header">
      <h3 class="fatwa-title">حكم الأذكار والصلاة على النبي صلى الله عليه وسلم على غير طهارة</h3>
      <button class="close-fatwa" id="closeFatwa">&times;</button>
    </div>
    <div class="fatwa-body">
      <p>الإجابــة<br>
      الحمد لله، والصلاة والسلام على رسول الله، وعلى آله وصحبه، أما بعد:</p>
      
      <p>فإن الأفضل والأكمل للمسلم إذا أراد الصلاة على النبي صلى الله عليه وسلم أو قراءة الأذكار والأدعية .. أن يكون على طهارة كاملة وهيئة حسنة، لكن لا مانع من أن يصلي على النبي صلى الله عليه وسلم، ويذكر الله تعالى ويدعوه وهو جنب أو حائض أو محدث حدثاً أصغر أو على أي هيئة كان.</p>
      
      <p>لقوله تعالى في وصف عباده أولي الألباب (الَّذِينَ يَذْكُرُونَ اللَّهَ قِيَاماً وَقُعُوداً وَعَلَى جُنُوبِهِم) (آل عمران: من الآية191).</p>
      
      <p>ولما في الصحيحين عن عائشة رضي الله عنها قالت: كان النبي صلى الله عليه وسلم يذكر الله على كل أحيانه.</p>
      
      <p>إلا إذا كان هذا الذكر قرآناً فإنه لا يجوز ذلك في حالة الجنابة على الصحيح، لما رواه أحمد وأصحاب السنن عن علي رضي الله عنه قال: كان رسول الله صلى الله عليه وسلم يقرئنا القرآن ما لم يكن جنباً.</p>
      
      <p>والله أعلم.</p>
      
      <p>مصدر الفتوى: <a href="https://www.islamweb.net/ar/fatwa/864/" class="fatwa-link" target="_blank">إسلام ويب</a></p>
    </div>
  </div>
</div>

<style>
  /* تنسيقات زر الفتوى المعدل */
  .action-button.info-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 20px;
    border-radius: 5px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
  }
  
  /* تنسيقات نافذة الفتوى */
  .fatwa-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }
  
  .fatwa-content {
    background-color: #fff;
    padding: 20px;
    border-radius: 10px;
    width: 90%;
    max-width: 600px;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  }
  
  .fatwa-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
  }
  
  .fatwa-title {
    font-size: 1.3rem;
    color: #2a5885;
    margin: 0;
  }
  
  .close-fatwa {
    background: none;
    border: none;
    font-size: 1.8rem;
    cursor: pointer;
    color: #777;
    line-height: 1;
  }
  
  .fatwa-body {
    line-height: 1.8;
    text-align: right;
    color: #333;
  }
  
  .fatwa-body p {
    margin-bottom: 15px;
  }
  
  .fatwa-link {
    color: #2a5885;
    text-decoration: none;
    font-weight: bold;
  }
  
  .fatwa-link:hover {
    text-decoration: underline;
  }
  
  /* تنسيقات للشاشات الصغيرة */
  @media (max-width: 768px) {
    .fatwa-content {
      width: 95%;
      padding: 15px;
    }
    
    .fatwa-title {
      font-size: 1.1rem;
    }
  }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // عناصر DOM
  const fatwaBtn = document.getElementById('fatwaBtn');
  const fatwaModal = document.getElementById('fatwaModal');
  const closeFatwa = document.getElementById('closeFatwa');
  
  // فتح نافذة الفتوى
  fatwaBtn.addEventListener('click', function() {
    fatwaModal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
  });
  
  // إغلاق نافذة الفتوى
  closeFatwa.addEventListener('click', function() {
    fatwaModal.style.display = 'none';
    document.body.style.overflow = 'auto';
  });
  
  // إغلاق النافذة عند النقر خارجها
  fatwaModal.addEventListener('click', function(e) {
    if (e.target === fatwaModal) {
      fatwaModal.style.display = 'none';
      document.body.style.overflow = 'auto';
    }
  });
});
</script>





































    <!-- التطبيق الرئيسي -->
    <div id="app" style="display: none;">
        <h1>عداد الأذكار</h1>
        <p class="message" id="message">قالَ رَسُولُ اللَّهِ ﷺ: منْ لَزِم الاسْتِغْفَار، جَعَلَ اللَّه لَهُ مِنْ كُلِّ ضِيقٍ مخْرجًا، ومنْ كُلِّ هَمٍّ فَرجًا، وَرَزَقَهُ مِنْ حيْثُ لاَ يَحْتَسِبُ رواه أبو داود.</p>
        <div class="counter" id="counter">0</div>
        
        <div class="stats">
            <div class="stat-item">
                <p>استغفار: <span id="estighfar-count">0</span></p>
            </div>
            <div class="stat-item">
                <p>تسبيح: <span id="tasbeeh-count">0</span></p>
            </div>
            <div class="stat-item">
                <p>صلاة على النبي: <span id="salah-count">0</span></p>
            </div>
            <div class="stat-item">
                <p>المجموع الكلي: <span id="total-count">0</span></p>
            </div>
        </div>
        
        <div class="button-container">
            <button class="button" id="estighfar-btn" aria-label="استغفار">استغفار</button>
            <button class="button" id="tasbeeh-btn" aria-label="تسبيح">تسبيح</button>
            <button class="button" id="salah-btn" aria-label="صلاة على النبي">صلاة</button>
            <button class="button button-reset" id="reset-btn" aria-label="تصفير العداد">تصفير</button>
        </div>
        
        <div class="action-buttons">
            <button class="action-button sound-btn" id="sound-btn">إيقاف الصوت</button>
            <button class="action-button vibration-btn" id="vibration-btn">إيقاف الاهتزاز</button>
            <button class="action-button toggle-theme" id="theme-btn">الوضع الداكن</button>

            <!-- زر الفتوى المعدل ليحل محل زر فتوى الطهارة -->
<button class="action-button info-btn" id="fatwaBtn">
  <i class="fas fa-info-circle"></i> فتوى الأذكار على غير طهارة
</button>

        </div>
    </div>
    
    <footer>
        تم التطوير بواسطة <span class="logo">عداد الأذكار</span> &copy; <span id="year"></span>
    </footer>
    
    <div class="notification" id="notification"></div>
    
    <div class="modal" id="milestoneModal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close-modal" id="close-modal">&times;</button>
                <h3 class="modal-title">مبروك!</h3>
            </div>
            <div class="modal-body" id="milestoneMessage"></div>
            <div class="modal-verse" id="milestoneVerse"></div>
        </div>
    </div>

    <script>
        // بيانات التطبيق
        const appData = {
            counts: {
                total: 0,
                estighfar: 0,
                tasbeeh: 0,
                salah: 0
            },
            settings: {
                sound: true,
                vibration: true
            },
            theme: 'light',
            gender: null // سيتم تعيينه من قبل المستخدم
        };

        // عناصر DOM
        const elements = {
            genderModal: document.getElementById('genderModal'),
            maleBtn: document.getElementById('maleBtn'),
            femaleBtn: document.getElementById('femaleBtn'),
            fatwaModal: document.getElementById('fatwaModal'),
            closeFatwa: document.getElementById('closeFatwa'),
            infoBtn: document.getElementById('infoBtn'),
            app: document.getElementById('app'),
            counter: document.getElementById('counter'),
            message: document.getElementById('message'),
            estighfarCount: document.getElementById('estighfar-count'),
            tasbeehCount: document.getElementById('tasbeeh-count'),
            salahCount: document.getElementById('salah-count'),
            totalCount: document.getElementById('total-count'),
            estighfarBtn: document.getElementById('estighfar-btn'),
            tasbeehBtn: document.getElementById('tasbeeh-btn'),
            salahBtn: document.getElementById('salah-btn'),
            resetBtn: document.getElementById('reset-btn'),
            soundBtn: document.getElementById('sound-btn'),
            vibrationBtn: document.getElementById('vibration-btn'),
            themeBtn: document.getElementById('theme-btn'),
            notification: document.getElementById('notification'),
            milestoneModal: document.getElementById('milestoneModal'),
            closeModal: document.getElementById('close-modal'),
            milestoneMessage: document.getElementById('milestoneMessage'),
            milestoneVerse: document.getElementById('milestoneVerse'),
            year: document.getElementById('year')
        };

        // تهيئة الصوت
        const audio = new Audio('data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV');

        // التحقق من دعم localStorage
        function checkLocalStorage() {
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                return true;
            } catch (e) {
                return false;
            }
        }

        // تحميل البيانات المحفوظة
        function loadData() {
            if (checkLocalStorage()) {
                const savedData = localStorage.getItem('azkarCounterData');
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    appData.counts = parsedData.counts || appData.counts;
                    appData.settings = parsedData.settings || appData.settings;
                    appData.theme = parsedData.theme || appData.theme;
                    appData.gender = parsedData.gender || null;
                }
            }
            
            // إذا كان الجنس محدداً مسبقاً، نعرض التطبيق مباشرة
            if (appData.gender !== null) {
                elements.genderModal.style.display = 'none';
                elements.app.style.display = 'block';
            }
            
            updateUI();
        }

        // حفظ البيانات
        function saveData() {
            if (checkLocalStorage()) {
                try {
                    localStorage.setItem('azkarCounterData', JSON.stringify(appData));
                } catch (e) {
                    console.log("لا يمكن حفظ البيانات، قد يكون تخزين localStorage ممتلئاً");
                }
            }
        }

        // تحديث واجهة المستخدم
        function updateUI() {
            elements.counter.textContent = appData.counts.total;
            elements.estighfarCount.textContent = appData.counts.estighfar;
            elements.tasbeehCount.textContent = appData.counts.tasbeeh;
            elements.salahCount.textContent = appData.counts.salah;
            elements.totalCount.textContent = appData.counts.total;
            
            elements.soundBtn.textContent = appData.settings.sound ? 'إيقاف الصوت' : 'تشغيل الصوت';
            elements.vibrationBtn.textContent = appData.settings.vibration ? 'إيقاف الاهتزاز' : 'تشغيل الاهتزاز';
            elements.themeBtn.textContent = appData.theme === 'light' ? 'الوضع الداكن' : 'الوضع الفاتح';
            
            document.body.setAttribute('data-theme', appData.theme);
            
            // تحديث سنة حقوق النشر
            elements.year.textContent = new Date().getFullYear();
        }

        // تأثير الاهتزاز للجهاز
        function vibrateDevice() {
            if (appData.settings.vibration) {
                try {
                    // 50ms vibration for most devices
                    if (navigator.vibrate) {
                        navigator.vibrate(50);
                    } 
                    // Fallback for older browsers
                    else if (navigator.webkitVibrate) {
                        navigator.webkitVibrate(50);
                    }
                } catch (e) {
                    console.log("Vibration not supported");
                }
            }
        }

        // تشغيل الصوت
        function playSound() {
            if (appData.settings.sound) {
                try {
                    audio.volume = 0.2; // تخفيض الصوت لتجنب المشاكل
                    audio.play().then(() => {
                        // الصوت يعمل
                    }).catch(e => {
                        // على iOS، يحتاج التفاعل مع المستخدم أولاً
                        console.log("لم يتم تشغيل الصوت:", e);
                        
                        // عرض رسالة للمستخدم لتوجيهه للنقر على الصفحة أولاً
                        if (e.name === 'NotAllowedError') {
                            showNotification("الرجاء النقر على الصفحة أولاً لتمكين الصوت");
                        }
                    });
                } catch (e) {
                    console.log("خطأ في تشغيل الصوت:", e);
                }
            }
        }

        // عرض الإشعار
        function showNotification(message) {
            elements.notification.textContent = message;
            elements.notification.classList.add('show');
            
            setTimeout(() => {
                elements.notification.classList.remove('show');
            }, 3000);
        }

        // عرض إنجاز
        function showMilestone(message, verse) {
            elements.milestoneMessage.textContent = message;
            elements.milestoneVerse.textContent = verse;
            elements.milestoneModal.classList.add('active');
            
            setTimeout(() => {
                elements.milestoneModal.classList.remove('active');
            }, 5000);
        }

        // التحقق من الإنجازات
        function checkMilestones(type, count) {
            if (count === 100) {
                const maleMessages = {
                    estighfar: "أيها المسلم، أحسنت وبارك الله فيك! لكن عليك بالمزيد لنصل إلى الألف، لتتقرب من رب العالمين ولتعويض ما فاتك من ذنوب، فلا تدري متى يغلبك الشيطان.",
                    tasbeeh: "أيها المسلم، أحسنت وبارك الله فيك! لكن عليك بالمزيد لنصل إلى الألف، لتتقرب من رب العالمين ولتعويض ما فاتك من ذنوب، فلا تدري متى يغلبك الشيطان.",
                    salah: "أحسنت وبارك الله فيك! صلاتك على النبي ﷺ نور لك يوم القيامة، واصل لنصل إلى الألف."
                };
                
                const femaleMessages = {
                    estighfar: "أيتها المسلمة، أحسنتي وبارك الله فيك! لكن عليك بالمزيد لنصل إلى الألف، لتتقربي من رب العالمين ولتعويضي ما فاتك من ذنوب، فلا تدري متى يغلبك الشيطان.",
                    tasbeeh: "أيتها المسلمة، أحسنتي وبارك الله فيك! لكن عليك بالمزيد لنصل إلى الألف، لتتقربي من رب العالمين ولتعويضي ما فاتك من ذنوب، فلا تدري متى يغلبك الشيطان.",
                    salah: "أحسنتي وبارك الله فيك! صلاتك على النبي ﷺ نور لك يوم القيامة، واصلي لنصل إلى الألف."
                };
                
                const messages = appData.gender === 'male' ? maleMessages : femaleMessages;
                
                const verses = {
                    estighfar: "﴿ وَبِالْأَسْحَارِ هُمْ يَسْتَغْفِرُونَ﴾ [سورة الذاريات: 18]",
                    tasbeeh: "﴿ فَسُبْحَانَ اللَّهِ حِينَ تُمْسُونَ وَحِينَ تُصْبِحُونَ ﴾ [سورة الروم: 17]",
                    salah: "﴿ إِنَّ اللَّهَ وَمَلَائِكَتَهُ يُصَلُّونَ عَلَى النَّبِيِّ ۚ يَا أَيُّهَا الَّذِينَ آمَنُوا صَلُّوا عَلَيْهِ وَسَلِّمُوا تَسْلِيمًا ﴾ [سورة الأحزاب: 56]"
                };
                
                showMilestone(messages[type], verses[type]);
            }
            else if (count === 1000) {
                const maleMsg = "فلنجاوز الألف في كل ذكر يا مجاهد  النفس! بعد تحقيق الألف في كل منهم، فنقول لك : بارك الله فيك وحفظك، فلتضف المزيد ما استطعت.";
                const femaleMsg = " فلنجاوز الألف في كل ذكر يا  مجاهدة النفس! بعد تحقيق الألف في كل منهم، فنقول لك: بارك الله فيكي وحفظك، فأضيفي المزيد ما استطعت ان شاء الله .";
                
                const msg = appData.gender === 'male' ? maleMsg : femaleMsg;
                const verse = "﴿ قُلْ يَا عِبَادِيَ الَّذِينَ أَسْرَفُوا عَلَىٰ أَنفُسِهِمْ لَا تَقْنَطُوا مِن رَّحْمَةِ اللَّهِ ۚ إِنَّ اللَّهَ يَغْفِرُ الذُّنُوبَ جَمِيعًا ۚ إِنَّهُ هُوَ الْغَفُورُ الرَّحِيمُ ﴾ [الزمر: 53]";
                showMilestone(msg, verse);
            }
        }

        // زيادة العداد
        function incrementCounter(type) {
            // تأثير الصوت
            playSound();
            
            // تأثير الاهتزاز
            vibrateDevice();
            
            // تأثير النبض للعداد
            elements.counter.classList.add('counter-animate');
            setTimeout(() => {
                elements.counter.classList.remove('counter-animate');
            }, 300);
            
            // زيادة العداد
            appData.counts[type]++;
            appData.counts.total++;
            
            // تحديث الرسالة
            const messages = {
                estighfar: "استغفر الله العظيم",
                tasbeeh: "سبحان الله وبحمده",
                salah: "اللهم صل على محمد وعلى آل محمد"
            };
            elements.message.textContent = messages[type];
            
            // التحقق من الإنجازات
            checkMilestones(type, appData.counts[type]);
            
            // تحديث الواجهة وحفظ البيانات
            updateUI();
            saveData();
        }

        // تصفير العداد
        function resetCounter() {
            appData.counts = {
                total: 0,
                estighfar: 0,
                tasbeeh: 0,
                salah: 0
            };
            
            elements.message.textContent = "تم تصفير العداد بنجاح.";
            showNotification("تم تصفير العداد");
            
            updateUI();
            saveData();
        }

        // تبديل الصوت
        function toggleSound() {
            appData.settings.sound = !appData.settings.sound;
            showNotification(appData.settings.sound ? "تم تشغيل الصوت" : "تم إيقاف الصوت");
            updateUI();
            saveData();
        }

        // تبديل الاهتزاز
        function toggleVibration() {
            appData.settings.vibration = !appData.settings.vibration;
            showNotification(appData.settings.vibration ? "تم تشغيل الاهتزاز" : "تم إيقاف الاهتزاز");
            updateUI();
            saveData();
        }

        // تبديل الوضع الليلي/النهاري
        function toggleTheme() {
            appData.theme = appData.theme === 'light' ? 'dark' : 'light';
            updateUI();
            saveData();
        }

        // تأثير الاهتزاز عند الضغط على الأزرار
        function addVibrationEffect(element) {
            if (appData.settings.vibration) {
                element.classList.add('vibration');
                setTimeout(() => {
                    element.classList.remove('vibration');
                }, 300);
            }
        }

        // تحديد الجنس
        function setGender(gender) {
            appData.gender = gender;
            elements.genderModal.style.display = 'none';
            elements.app.style.display = 'block';
            saveData();
            
            // تحديث الرسالة الأولى حسب الجنس
            const initialMessages = {
                male: "قالَ رَسُولُ اللَّهِ ﷺ: منْ لَزِم الاسْتِغْفَار، جَعَلَ اللَّه لَهُ مِنْ كُلِّ ضِيقٍ مخْرجًا، ومنْ كُلِّ هَمٍّ فَرجًا، وَرَزَقَهُ مِنْ حيْثُ لاَ يَحْتَسِبُ رواه أبو داود.",
                female: "قالَ رَسُولُ اللَّهِ ﷺ: منْ لَزِمَتِ الاسْتِغْفَار، جَعَلَ اللَّه لَهَا مِنْ كُلِّ ضِيقٍ مخْرجًا، ومنْ كُلِّ هَمٍّ فَرجًا، وَرَزَقَهَا مِنْ حيْثُ لاَ تَحْتَسِبُ رواه أبو داود."
            };
            
            elements.message.textContent = initialMessages[gender];
        }

        // الكشف عن تفضيلات الوضع الداكن في النظام
        function detectSystemTheme() {
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                appData.theme = 'dark';
            } else {
                appData.theme = 'light';
            }
            updateUI();
        }

        // عرض فتوى الطهارة
        function showFatwa() {
            elements.fatwaModal.style.display = 'flex';
        }

        // إغلاق فتوى الطهارة
        function closeFatwa() {
            elements.fatwaModal.style.display = 'none';
        }

        // تهيئة الأحداث
        function initEvents() {
            elements.estighfarBtn.addEventListener('click', function(e) {
                incrementCounter('estighfar');
                addVibrationEffect(this);
            });
            
            elements.tasbeehBtn.addEventListener('click', function(e) {
                incrementCounter('tasbeeh');
                addVibrationEffect(this);
            });
            
            elements.salahBtn.addEventListener('click', function(e) {
                incrementCounter('salah');
                addVibrationEffect(this);
            });
            
            elements.resetBtn.addEventListener('click', function(e) {
                resetCounter();
                addVibrationEffect(this);
            });
            
            elements.soundBtn.addEventListener('click', toggleSound);
            elements.vibrationBtn.addEventListener('click', toggleVibration);
            elements.themeBtn.addEventListener('click', toggleTheme);
            elements.closeModal.addEventListener('click', function() {
                elements.milestoneModal.classList.remove('active');
            });
            
            elements.maleBtn.addEventListener('click', function() {
                setGender('male');
            });
            
            elements.femaleBtn.addEventListener('click', function() {
                setGender('female');
            });
            
            elements.infoBtn.addEventListener('click', showFatwa);
            elements.closeFatwa.addEventListener('click', closeFatwa);

            // تمكين الصوت على iOS عند النقر الأول
            document.addEventListener('click', function() {
                audio.volume = 0;
                audio.play().then(() => {
                    audio.pause();
                    audio.currentTime = 0;
                }).catch(e => {});
            }, { once: true });
        }

        // تهيئة التطبيق
        function init() {
            detectSystemTheme();
            loadData();
            initEvents();
            
            // إضافة listener لتغيرات الوضع الداكن في النظام
            if (window.matchMedia) {
                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                    appData.theme = e.matches ? 'dark' : 'light';
                    updateUI();
                    saveData();
                });
            }
        }

        // تشغيل التطبيق
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>













































































































<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>إشعارات هامة</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000;
            color: #fff;
            margin: 0;
            padding: 0;
        }
        .custom-modal {
            display: flex;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.1);
            justify-content: center;
            align-items: center;
            padding: 10px;
            box-sizing: border-box;
        }
        .custom-modal-content {
            background-color: #1a1a1a;
            color: #fff;
            padding: 15px;
            border-radius: 15px;
            width: 95%;
            max-width: 350px;
            max-height: 90vh;
            overflow-y: auto;
            text-align: center;
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.1);
            animation: fadeIn 0.3s ease-in-out;
            box-sizing: border-box;
            margin: 10px;
        }
        .custom-button {
            padding: 10px;
            border-radius: 8px;
            font-size: 14px;
            text-align: center;
            cursor: pointer;
            border: none;
            transition: background 0.3s, transform 0.2s;
            width: 100%;
            margin: 5px 0;
            box-sizing: border-box;
        }
        .btn-close {
            background-color: #d9534f;
            color: white;
        }
        .btn-close:hover {
            background-color: #c9302c;
            transform: scale(1.05);
        }
        h1 {
            font-size: 1.3rem;
            margin-top: 0;
        }
        p {
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 15px;
        }
        
        @media (max-width: 480px) {
            .custom-modal-content {
                padding: 12px;
                width: 98%;
            }
            h1 {
                font-size: 1.2rem;
            }
            p {
                font-size: 0.85rem;
            }
            .custom-button {
                padding: 8px;
                font-size: 0.9rem;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <!-- إشعار سورة الكهف -->
    <div id="kahfModal" class="custom-modal" style="display: none;">
        <div class="custom-modal-content">
            <h1>فضل سورة الكهف</h1>
            <p>من قرأ سورةَ ( الكهفِ ) في يومِ الجمعةِ أضاء له من النورِ ما بين الجمُعَتَين
              الراوي : أبو سعيد الخدري | المحدث : الألباني | المصدر : صحيح الترغيب | الصفحة أو الرقم : 736 | خلاصة حكم المحدث : صحيح | التخريج : أخرجه البيهقي (6209) واللفظ له، وأخرجه الحاكم (3392) باختلاف يسير</p>
           
            <button onclick="window.location.href='سورة الكهف مكتوبة.html'" class="custom-button">انتقل إليها الآن</button>
            <button class="custom-button btn-close" onclick="closeModal('kahfModal')">إغلاق</button>
        </div>
    </div>
    
    <!-- إشعار صلاة الجمعة -->
    <div id="jumaaModal" class="custom-modal" style="display: none;">
        <div class="custom-modal-content">
            <h1>فضل صلاة الجمعة</h1>
            <audio id="jumaaAudio">
                <source src="SALAT JOMOAA/JOMAA.mp3" type="audio/mpeg">
                متصفحك لا يدعم تشغيل الصوت.
            </audio>

            <p>من غسَّلَ يومَ الجمعةِ واغتسلَ ثمَّ بَكَّرَ وابتَكرَ ومشى ولم يرْكب ودنا منَ الإمامِ فاستمعَ ولم يلغُ كانَ لَهُ بِكلِّ خطوةٍ عملُ سنةٍ أجرُ صيامِها وقيامِها
            الراوي : أوس بن أبي أوس وقيل أوس بن أوس والد عمرو | المحدث : الألباني | المصدر : صحيح أبي داود
            الصفحة أو الرقم: 345 | خلاصة حكم المحدث : صحيح</p>
           
            <p>الصَّلَوَاتُ الخَمْسُ، وَالْجُمْعَةُ إلى الجُمْعَةِ، وَرَمَضَانُ إلى رَمَضَانَ، مُكَفِّرَاتٌ ما بيْنَهُنَّ إِذَا اجْتَنَبَ الكَبَائِرَ.
            الراوي : أبو هريرة | المحدث : مسلم | المصدر : صحيح مسلم
            الصفحة أو الرقم: 233 | خلاصة حكم المحدث : [صحيح]</p>

            <p>قال رسول الله ﷺ: "أفضلُ يومٍ طلعتْ فيه الشمسُ يومُ الجمعةِ، فيه خُلِقَ آدمُ، وفيه أُدخلَ الجنةَ، وفيه أُخرجَ منها"
            . [صحيح] - [رواه مسلم] - [صحيح مسلم - 854]</p>

            <button class="custom-button btn-close" onclick="closeModal('jumaaModal')">إغلاق</button>
        </div>
    </div>

    <!-- الإشعار العام -->
    <div id="generalModal" class="custom-modal" style="display: none;">
        <div class="custom-modal-content">
            <h1>⚡ أَدَاة عِلْم ⚡</h1>
            <p>نحن نعمل باستمرار على تطوير وتحسين موقعنا لنقدم لك أفضل تجربة ممكنة.</p>
            <p>المزيد قادم والتحديثات يومية ان شاء الله</p>
            <button class="custom-button btn-close" onclick="closeModal('generalModal')">إغلاق</button>
        </div>
    </div>

    <script>
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
        }
    
        function showModals() {
            let today = new Date();
            let dayOfWeek = today.getDay();
            let hours = today.getHours();
    
            // ✅ عرض الإشعار العام فورًا
            document.getElementById("generalModal").style.display = "flex";
    
            if (dayOfWeek === 5) { // الجمعة فقط
                document.getElementById("kahfModal").style.display = "flex"; // إشعار سورة الكهف
    
                if (hours < 14) { // قبل 14:00 فقط
                    document.getElementById("jumaaModal").style.display = "flex"; // إشعار صلاة الجمعة
                    
                    let audio = document.getElementById("jumaaAudio");
                    if (audio && !audio.dataset.played) { // تشغيل الصوت عند ظهور الإشعار
                        let playAudio = () => {
                            audio.play().then(() => {
                                audio.dataset.played = "true"; // منع التكرار
                                console.log("تم تشغيل صوت صلاة الجمعة.");
                            }).catch(error => console.log("تشغيل الصوت يتطلب تفاعل المستخدم", error));
                        };
    
                        if (document.hasFocus()) {
                            playAudio();
                        } else {
                            document.addEventListener("click", playAudio, { once: true });
                            document.addEventListener("touchstart", playAudio, { once: true });
                        }
    
                        audio.onended = function () {
                            console.log("انتهى تشغيل ملف الصوت.");
                        };
                    }
                }
            }
        }
    
        document.addEventListener("DOMContentLoaded", function() {
            let today = new Date();
            let dayOfWeek = today.getDay();
            let hours = today.getHours();
    
            if (dayOfWeek === 5 && hours < 14) { // تشغيل الصوت فقط يوم الجمعة قبل 14:00
                let audio = document.getElementById("jumaaAudio");
                if (audio) {
                    document.body.addEventListener("click", function() {
                        if (audio.paused) {
                            audio.play().catch(error => console.log("تشغيل الصوت يتطلب تفاعل المستخدم", error));
                        }
                    }, { once: true });
                }
            }
        });
    
        // ✅ تشغيل `showModals` دائمًا لإظهار الإشعار العام مباشرةً
        window.onload = showModals;
    </script>
</body>
</html>


















































































